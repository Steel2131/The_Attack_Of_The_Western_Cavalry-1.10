#textdomain wesnoth-taotwc

# LANGUAGE CHECK HAS BEGUN
[scenario]
    id=8_The_Kidnapping
    name= _ "The Kidnapping"
    next_scenario=9_Wesmere_Forest
    map_data="{~add-ons/The_Attack_Of_The_Western_Cavalry/maps/8_The_Kidnapping.map}"
#ifdef EASY
    turns=30
#endif
#ifdef HARD
    turns=25
#endif
    victory_when_enemies_defeated=no

    {DEFAULT_SCHEDULE_DUSK}

    {~add-ons/The_Attack_Of_The_Western_Cavalry/utils/summarise.cfg}

	[story]
		{TAOTWC_TRAVEL_8}
	[/story]

    [side]
#ifdef EASY
        gold=250
#endif
#ifdef HARD
        gold=200
#endif
        type=Western Knight
        id=Aethyr
        name= _ "Aethyr"
        unrenamable=yes
        profile="portraits/aethyr.png"
        side=1
        canrecruit=yes
        controller=human
        {FLAG_CAVALRY}
        recruit=Western Horseman,Western Cavalryman,Western Junior Commander,Prisoner2,Skeleton2,Skeleton Archer2,Walking Corpse2,Ghoul2,Ghost2,Skeleton Rider2
        team_name=Westerns
        user_team_name=_"Western Cavalry"
        fog=yes
    [/side]
    [side]
        type=Elvish Halberdier
        id=Arya
        name= _ "Arya"
        unrenamable=yes
        profile=portraits/arya.png
        [modifications]
            {TRAIT_MIGHTY}
        [/modifications]
        side=2
        canrecruit=no
        controller=ai
        team_name=Elves
        user_team_name=_"Elves"
        fog=yes
        gold=0
    [/side]
    [side]
        type=Master Bowman
        id=Hunter
        name= _ "Egrywn"
        unrenamable=yes
        side=3
        canrecruit=yes
        recruit=Spearman,Bowman
        controller=ai
        team_name=Elves
        user_team_name=_"Wesnoth's Army"
        fog=yes
        gold=150
        [ai] 
            [target]
                side=1
                value=100
            [/target]
        [/ai]
    [/side]
    [side]
        no_leader=yes
        side=4
        controller=ai
        team_name=Elves
        user_team_name=_"Woods"
        fog=yes
        [ai]
            aggressopn=1.0
            [target]
                side=1
                value=100
            [/target]
        [/ai]
    [/side]

    {WEAPON_LONGBOW 44 20 Longbow1}
    {HELMET_ELVISH 22 32 Helmet1}
#ifdef EASY
    {HELMET_ORCISH 5 10 Helmet2}
#endif

    [event]
        name=prestart

        {VARIABLE outlaws 0}

        [objectives]
            side=1
            [objective]
                description= _ "You kidnap an elf"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Aethyr"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Leogwyn"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Mal-Talar"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Tal-M'rgan"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Warwick"
                condition=lose
            [/objective]
            [objective]
                description= _ "Turns run out"
                condition=lose
            [/objective]
        [/objectives]

        {GUARDIAN_UNIT 4 (Ancient Wose) 31 4}
        {GUARDIAN_UNIT 4 (Ancient Wose) 30 4}
        {GUARDIAN_UNIT 4 (Ancient Wose) 29 5}
        {GUARDIAN_UNIT 4 (Ancient Wose) 28 5}
        {GUARDIAN_UNIT 4 (Ancient Wose) 27 6}
        {GUARDIAN_UNIT 4 (Ancient Wose) 26 6}
        {GUARDIAN_UNIT 4 (Ancient Wose) 25 7}
        {GUARDIAN_UNIT 4 (Ancient Wose) 24 7}
        {GUARDIAN_UNIT 4 (Ancient Wose) 23 8}
        {GUARDIAN_UNIT 4 (Ancient Wose) 22 8}
        {GUARDIAN_UNIT 4 (Ancient Wose) 21 9}
        {GUARDIAN_UNIT 4 (Ancient Wose) 20 9}

        {GUARDIAN_UNIT 4 (Ancient Wose) 41 11}
        {GUARDIAN_UNIT 4 (Ancient Wose) 40 11}
        {GUARDIAN_UNIT 4 (Ancient Wose) 39 12}
        {GUARDIAN_UNIT 4 (Ancient Wose) 38 12}
        {GUARDIAN_UNIT 4 (Ancient Wose) 37 13}
        {GUARDIAN_UNIT 4 (Ancient Wose) 36 13}
        {GUARDIAN_UNIT 4 (Ancient Wose) 35 14}
        {GUARDIAN_UNIT 4 (Ancient Wose) 34 14}
        {GUARDIAN_UNIT 4 (Ancient Wose) 33 15}
        {GUARDIAN_UNIT 4 (Ancient Wose) 32 15}
        {GUARDIAN_UNIT 4 (Ancient Wose) 31 16}

        {GUARDIAN_UNIT 4 (Ancient Wose) 42 12}
        {GUARDIAN_UNIT 4 (Ancient Wose) 43 12}
        {GUARDIAN_UNIT 4 (Ancient Wose) 44 13}

        [unit]
            id=Eldril
            name= _ "Eldril"
            type=Elvish Fighter2
            side=2
            x,y=22,17
            ai_special=guardian
            {IS_LOYAL}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
            [/modifications]
        [/unit]

    [/event]

    {CORPSES (
        {NOT id=Aethyr}
        {NOT id=Leogwyn}
        {NOT id=Morgan}
        {NOT id=Garak}
        {NOT id=Warwick}
        {NOT id=Talar}
        {NOT id=Boldragur}
        {NOT id=Arya}
        {NOT id=Eldril}
        {NOT id=Arlendil}
        {NOT id=Elwandera}
        {NOT id=Elvera}
        {NOT id=Axonthos}
        {NOT id=Kaldrad}
    )}

    [item]
        image=items/tent.png
        x,y=29,29
    [/item]
    [item]
        image=items/tent.png
        x,y=29,30
    [/item]
    [item]
        image=items/tent.png
        x,y=30,29
    [/item]
    [item]
        image=items/tent.png
        x,y=34,30
    [/item]
    [item]
        image=items/tent.png
        x,y=34,31
    [/item]
    [item]
        image=items/tent.png
        x,y=35,31
    [/item]
    [item]
        image=items/tent.png
        x,y=37,29
    [/item]
    [item]
        image=items/tent.png
        x,y=37,30
    [/item]
    [item]
        image=items/tent.png
        x,y=36,29
    [/item]
    [item]
        image=items/tent.png
        x,y=37,29
    [/item]
    [item]
        image=items/tent.png
        x,y=38,29
    [/item]
    [item]
        image=items/tent.png
        x,y=41,29
    [/item]
    [item]
        image=items/tent.png
        x,y=42,28
    [/item]

    [item]
        image=scenery/signpost-nw.png
        x,y=7,2
    [/item]



    [event]
        name=start
        {MOVE_UNIT id=Aethyr 40 3}

        [recall]
            id=Talar
            x,y=39,4
        [/recall]
        [recall]
            id=Morgan
            x,y=39,5
        [/recall]
        [recall]
            id=Warwick
            x,y=40,4
        [/recall]
        [recall]
            id=Leogwyn
            x,y=40,5
        [/recall]
        [recall]
            id=Garak
            x,y=41,4
        [/recall]


        [message]
            speaker=Aethyr
            message= _ "Fine! It seems that the Wesnothian camp is on the other side of the river. We're almost there."
        [/message]
        [message]
            speaker=Talar
            message= _ "Yes, but I must warn you, this is a very unsafe place. Can you see that gate there? Don't leave it to enter into the forest. Stay on the road. Don't go even to the villages. Not ever!"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Okay, we'll stay on the road. Now, let's attack that camp!"
        [/message]
    [/event]


    [event]
        name=moveto
        [filter]
            side=1
            [filter_vision]
                viewing_side=2
            [/filter_vision]
        [/filter]

        # In the first (unpublished) version (0.0.1) this event was very buggy
        # It is quite a difficult solution I found, and this 
        # WML description is not pleasant to read. SORRY
        ######################################################


    [if]
        [have_unit]
            id=Aethyr
            x,y=$x1,$y1
        [/have_unit]
        [then]
            {VARIABLE aethyr_is_primary_unit yes}
        [/then]
        [else]
            {VARIABLE aethyr_is_primary_unit no}
        [/else]
    [/if]
    #define IF_AETHYR_PRIMARY
        [show_if]
            [variable]
                name=aethyr_is_primary_unit
                equals=yes
            [/variable]
        [/show_if]
    #enddef
    #define IF_AETHYR_NOT_PRIMARY
        [show_if]
            [variable]
                name=aethyr_is_primary_unit
                equals=no
            [/variable]
        [/show_if]
    #enddef


        [message]
            speaker=unit
            message= _ "Hey, there's an elf!"
        [/message]
        [message]
            speaker=Eldril
            message= _ "Who are you, and what are you doing in our forest?"
        [/message]
        [message]
            speaker=unit
            message= _ "Who am I? Am a Western Knight! And this tool in my hand is a sword! Do you want me to introduce it to you...?"
        [/message]
        [message]
            speaker=Eldril
            message= _ "Just shut up! Lady Arya knows all about you Westerns...!"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Hey hey wait a moment! Whom did you mention?"
        [/message]


        [message]
            speaker=Eldril
            message= _ "Forget it! So, I suppose you are the leader. I hope you will show more respect towards us."
            {IF_AETHYR_NOT_PRIMARY}
        [/message]
        [message]
            speaker=Eldril
            message= _ "Never mind!"
            {IF_AETHYR_PRIMARY}
        [/message]


        [message]
            speaker=unit
            message= _ "I always wonder how can it be that they speak so nicely, even before their death..."
            {IF_AETHYR_NOT_PRIMARY}
        [/message]
        [message]
            speaker=Aethyr
            message= _ "You shut up! Elf! Tell me directly: is yer leader Arya or not? If you do not answer immediately I will have you beheaded!"
            {IF_AETHYR_NOT_PRIMARY}
        [/message]


        [message]
            speaker=Aethyr
            message= _ "Answer, or you will be beaheaded in two moments!"
            {IF_AETHYR_PRIMARY}
        [/message]


        [message]
            speaker=unit
            message= _ "Oh, can I kill him?"
            {IF_AETHYR_NOT_PRIMARY}
        [/message]
        [message]
            speaker=Aethyr
            message= _ "I said shut up! Elf, answer!"
            {IF_AETHYR_NOT_PRIMARY}
        [/message]


        [message]
            speaker=Eldril
            message= _ "Yes, our commander is Lady Arya, but you must not call her just simply Arya, because this behaviour is unacceptable. To you she is Lady Arya, Her Noble Highness, or Princess!"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Good. Now, please tell Arya that..."
        [/message]
        [message]
            speaker=Eldril
            message= _ "Is your brain really so slow, or you are just trying to insult me?"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Number 2. So, tell Arya that I wanna talk with her."
        [/message]
        [message]
            speaker=Eldril
            message= _ "One, she never meets with pigs, and two, I would not introduce you even if I wanted to!"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Then I be a bit politer, please speak to Arya or yer a dead man!"
        [/message]
        [message]
            speaker=Eldril
            message= _ "And what should I say? 'A dirty bunch of cavaliers is threatening to cut my head off'?"
        [/message]


        [message]
            speaker=unit
            message= _ "One more word, and you'll be eating my sword!"
            {IF_AETHYR_NOT_PRIMARY}
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Now, for the third time, Shut up! No! Tell her that Commodore Aethyr wants to speak with her about an emergency."
            {IF_AETHYR_NOT_PRIMARY}
        [/message]


        [message]
            speaker=Aethyr
            message= _ "Nope. I thought you elves are more clever. Tell her that Commodore Aethyr wants to speak with her about an emergency."
            {IF_AETHYR_PRIMARY}
        [/message]


        [message]
            speaker=Eldril
            message= _ "I shall see what can I do for you."
        [/message]

        {MOVE_UNIT id=Aethyr 26 15}
        {MOVE_UNIT id=Eldril 6 2}
        [delay]
            time=800
        [/delay]
        {MOVE_UNIT id=Eldril 26 15}
        {MOVE_UNIT id=Arya 26 14}

        [message]
            speaker=Arya
            message= _ "How can that be that I go anywhere, I bump into you!?"
        [/message]


        [message]
            speaker=unit
            message= _ "In the Western Kingdom we say 'Welcome you'."
            {IF_AETHYR_NOT_PRIMARY}
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Sometimes I really think that some of my men's brains are smaller than others. What did I say to you a few moments ago?"
            {IF_AETHYR_NOT_PRIMARY}
        [/message]
        [message]
            speaker=unit
            message= _ "Okay, I'll shut up."
            {IF_AETHYR_NOT_PRIMARY}
        [/message]


        [message]
            speaker=Talar
            message= _ "In other kingdoms we say 'Welcome you'."
            {IF_AETHYR_PRIMARY}
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Hey! It's not the point..."
            {IF_AETHYR_PRIMARY}
        [/message]


        [message]
            speaker=Arya
            message= _ "No, he's right, I was rude, sorry."
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Never mind about the formalities, we don't have too much time for 'em. We gotta speak alone."
        [/message]
        [message]
            speaker=Arya
            message= _ "I'm afraid we can't."
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Look, the soldiers mustn't know about these things! I don't know about this elvish behaviour, but I don't doubt that they would kill even their King if they got this information!..."
        [/message]
        [message]
            speaker=Arya
            message= _ "Okay, I know what top secret means. Eldril, you may go now."
        [/message]
        [message]
            speaker=Eldril
            message= _ "If you want me my lady. But I will be back in fifteen minutes, and if you got hurt, I will torture them to death."
        [/message]
        {MOVE_UNIT id=Eldril 6 2}


        [if]
            [variable]
                name=aethyr_is_primary_unit
                equals=no
            [/variable]
            [then]
                [message]
                    speaker=Aethyr
                    message= _ "You too!"
                [/message]
                [message]
                    speaker=unit
                    message= _ "MmmmMMmMmmmMMm"
                [/message]
                [message]
                    speaker=Aethyr
                    message= _ "What?"
                [/message]
                [message]
                    speaker=unit
                    message= _ "MmMmmMmMmmmmMMM...*<i>gulp</i>* Sir, it's hard to speak if my mauth is closed..."
                [/message]
                [message]
                    speaker=Aethyr
                    message= _ "Arrghh! You will be the death of me, I am sure! Get away!"
                [/message]
                [message]
                    speaker=unit
                    message= _ "Aye!"
                [/message]
                
                {STORE_UNIT x,y=$x1,$y1 western_unit no}
                {MOVE_UNIT x,y=$x1,$y1 40 4}
                {SCROLL_TO 26 13}
            [/then]
        [/if]
        [message]
            speaker=Arya
            message= _ "All right. So, what's that 'top-secret' thing you wanted to share with me?"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Arya, have you ever heard about the Lance of Death?"
        [/message]
        [message]
            speaker=Arya
            message= _ "No, not really. Although I hadn't done any tale reading, I haven't heard about it. Should've I?"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "No, just wanted to make sure. But you must've heard that new ships have been sighted."
        [/message]
        [message]
            speaker=Arya
            message= _ "Your reinforcement, is it not?"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "I'm afraid not! If you wanna hear the whole story, sit down, because it's a bit long."
        [/message]
        [message]
            speaker=Arya
            [option]
                message= _ "I'm listenning."
                [command]
                    [message]
                        speaker=Aethyr
                        message= _ "So, 544 years before, Xanthos the First established a little government on our island. But it was not enough of course, and Xanthos wanted to rule the whole island, but it was not easy. You know, the island is almost twice as big as Wesnoth."
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "But, there's an older tale. Around ten thousand years ago, when we were no more than aggressive barbarians, there was a great warlord named Khaso Than. He was skilled in the dark arts, and he was the greatest horseman in the world. One day, he summoned the Devil, because he wanted to conquer more lands. The Devil agreed to help him and made him a very strong weapon. This is the Lance of the Devil."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "I'm sure you don't really believe this story, and you don't expect me to believe it either, do you?"
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "Well, who knows? Even our religion is based on the Underness, which means something like Hell, we bid farewell with <i>'We shall meet in the Underness!'</i>, and the Lance, the Lance itself proved to be quite real."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "How can you know that the lance is real?"
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "Because without it the Western Empire couldn't exist! Xanthos I somehow obtained the Lance, and began to conquer the island, and what matters is that he succeeded! Nowadays, there are no more indepenent tribes in the Western Island. Only our empire exists. But we think that some kind of spell may have been put on the Lance. An assassin killed Xanthos, and his son became emperor."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "Who is it? Lawrence?"
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "Nay, he's also called Xanthos. Xanthos the Second. After he gained control of the Lance he became a bloodthirsty monster. Just as everyone before him..."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "So...who's more bloodthirsty? Lawrence or Xanthos?"
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "Pah, Lawrence is nothing compared to Xanthos. It's a dark era we're living in, Arya. I don't know any Wesnothian history, but I bet you haven't had as bad times as we are experiencing."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "*<i>chuckles</i>* Define bad."
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "No just suprvision...totally military based system, where only the phisically strong has word in ruling, therefore violence is neccessary and admired...no place for soul, kindness, et cetera, absolute madness in having more and more living forces, infantry, cavalry, and deep insanity of developing more and more destructive weapons..."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "Don't need to continue...I think I can imagine...but didn't you do anything about it?"
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "There was a rebellion. Quite a big one. We started from little sabotages, but our seriousness expanded into frontal battles. The result was unfortunately set. The Lance was not to be defeated. Our army was crashed like an ant, and we, the few survivors, fled."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "What do you mean 'fled'? *<i>laughs</i>* Sat on backs of dragons, and flew?"
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "What? There's naught to do with dragons, we don't have 'em. We commandeered some ships, and sailed away. After a few months we cought a Wesnothian ship captained by Morgan. Thus we reached coast here, at the Bay of Pearls.
But we've been tracked, that's for sure. We know, beacuse Aldril was attacked by Imperial ships a few days after <span font_style='italic'>we</span> had occupied it."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "So, you're trying to say that this Xanthos is our new enemy?"
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "Exactly."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "But...this Xanthos then cannot speak our common language yet, right? So...even if he allowed us to consult him,  how would we communicate with him?"
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "*<i>winks</i>* That's why you need us."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "*<i>smiles back</i>* And what do you want in return?"
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "Look, you need our help, and we need yours. Xanthos won't accept anything, but unconditioned surrender, but Leogwyn and I have a plan."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "Forgive me, but I don't feel like fighting on the side of the Undead."
                    [/message]
                    [message]
                        speaker=Aethyr
                        message= _ "I had no choice, and now you don't have any, either."
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "Hmm..."
                    [/message]
                [/command]
            [/option]
            [option]
                message= _ "<i>*Have played this campaign before, skip it*</i>"
                [command]
                [/command]
            [/option]
        [/message]
      
        [delay]
            time=100
        [/delay]
        
        {MOVE_UNIT id=Eldril 26 15}

        [message]
            speaker=Eldril
            message= _ "Okay mate, your time is up! Say goodbye."
        [/message]
        [message]
            speaker=Arya
            message= _ "Eldril, please tell the men that we are turning back. We are going to head Wesmere Forest."
        [/message]
        [message]
            speaker=Eldril
            message= _ "My Lady, forgive me, but are you crazy? You and I are the last ones who are still out. While you were talking, everyone else reached the Wesnothian camp."
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Then we need to attack the camp."
        [/message]
        [message]
            speaker=Eldril
            message= _ "I will never fight on your side!"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Oh yes you will if you wanna live and see the word '<i>Wesnoth</i>' on the map."
        [/message]
        [message]
            speaker=Arya
            message= _ "*<i>with doubts</i>* And you are able to save Wesnoth, right?"
        [/message]
        #
        # This message is logically incorrect. Rewrite needed!
        [message]
            speaker=Aethyr
            message= _ "I have my plan."
        [/message]
        #
        #
        [message]
            speaker=Arya
            message= _ "But we will need to kill if we want our men out of the camp. The wesnothians won't let you enter."
        [/message]
        [message]
            speaker=Aethyr
            message= _ "We are gonna kill our enemies, be sure of that. I'm not Lawrence, but I'm totally Western, and we're a wild nation."
        [/message]
        [message]
            find_in=western_unit
            message= _ "And we are out for blood!"
            {IF_AETHYR_NOT_PRIMARY}
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Hey! You promised you'd shut up!"
            {IF_AETHYR_NOT_PRIMARY}
        [/message]
        [message]
            find_in=western_unit
            message= _ "Oh yes...yes...sorry..."
            {IF_AETHYR_NOT_PRIMARY}
        [/message]
        [message]
            speaker=Arya
            message= _ "Okay okay! Do what you see to be proper."
        [/message]
    
        {MODIFY_UNIT id=Arya side 1}
        {MODIFY_UNIT id=Arya overlays misc/hero-icon.png}

        {MODIFY_UNIT id=Eldril side 1}

        [modify_side]
            side=2
            team_name=Westerns
        [/modify_side]
        [kill]
            side=4
        [/kill]
        [objectives]
            side=1
            [objective]
                description= _ "You rescue the stuck elves (you may lose 1), and reach the northern road which leads you to Wesmere Forest"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Aethyr"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Arya"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Leogwyn"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Mal-Talar"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Tal-M'rgan"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Warwick"
                condition=lose
            [/objective]
            [objective]
                description= _ "You lose 2 or more elves"
                condition=lose
            [/objective]
            [objective]
                description= _ "Turns run out"
                condition=lose
            [/objective]
            note= _ "Note: Eldril and Arya are not counted as any stuck elf"
        [/objectives]

        [modify_side]
            side=4
            gold=100
            canrecruit=yes
            recruit=Thug,Thief,Poacher
            team_name=Bandits
            user_team_name=_"Bandits"
        [/modify_side]
        [unit]
            id=Boldragur
            name= _ "Boldragur"
            type=Outlaw
            side=4
            overlays=misc/leader.png
            x=8
            y=22
            profile=portraits/boldragur.png
        [/unit]

        {MODIFY_UNIT (id=Boldragur) canrecruit yes}

#ifdef HARD
        {GUARDIAN_UNIT 4 (Highwayman) 7 2}
#endif
        {GUARDIAN_UNIT 4 (Highwayman) 12 6}
        {GUARDIAN_UNIT 4 (Highwayman) 7 3}

        [terrain]
            x,y=8,22
            terrain=Ke
        [/terrain]
        [terrain]
            x,y=7,22
            terrain=Ce
        [/terrain]
        [terrain]
            x,y=8,21
            terrain=Ce
        [/terrain]
        [terrain]
            x,y=9,22
            terrain=Ce
        [/terrain]
        [terrain]
            x,y=7,23
            terrain=Ce
        [/terrain]
        [terrain]
            x,y=8,23
            terrain=Ce
        [/terrain]
        [terrain]
            x,y=9,23
            terrain=Ce
        [/terrain]

        {VARIABLE elves 0}
        {VARIABLE got 0}
        {VARIABLE outlaws 1}
        {VARIABLE boldragur on_side_8}
        {CLEAR_VARIABLE western_unit}

     #undef IF_AETHYR_NOT_PRIMARY
     #undef IF_AETHYR_PRIMARY
    [/event]




    # OUTLAW EVENTS
    [event]
        name=sighted
        first_time_only=no
        [filter]
            side=4
        [/filter]
        [filter_second]
            side=1
        [/filter_second]
        [if]
            [variable]
                name=outlaws
                numerical_equals=1
            [/variable]
            [then]
                [message]
                    speaker=second_unit
                    message= _ "I can see a few outlaws!"
                [/message]
                [message]
                    speaker=Arya
                    message= _ "How can they be there?"
                [/message]
                [message]
                    speaker=unit
                    message= _ "We're not outlaws! We're just...ahm...cutting trees...for the winter.."
                [/message]
                [message]
                    speaker=Arya
                    message= _ "This the forest of the woses! If you had cut them...kill them! Kill all of them!"
                [/message]

                {VARIABLE outlaws 2}
            [/then]
        [/if]
    [/event]
    [event]
        name=sighted
        [filter]
            id=Boldragur
        [/filter]
        [filter_second]
            side=1
        [/filter_second]
        [message]
            speaker=second_unit
            message= _ "You'll be a dead man in five seconds!"
        [/message]
        [message]
            speaker=Boldragur
            message= _ "I'm not afraid of you!"
        [/message]
    [/event]
    [event]
        name=last breath
        [filter]
            id=Boldragur
        [/filter]
        [message]
            speaker=Boldragur
            message= _ "Stop! We can be friends! My men aren't soldiers that's true, but we could help you!"
        [/message]
        [message]
            speaker=Aethyr
            message= _ "Hmm..."
        [/message]
        [message]
            speaker=Arya
            message= _ "Aethyr! Don't be fool! These outlaws are worse than orcs!"
        [/message]




        [message]
            speaker=Boldragur
            message= _ "You can trust me, I promise for my men's life!"
        [/message]
        [message]
            speaker=Aethyr
            [option]
                message= _ "Every fool can see that yer dishonest! Kill them!"
                [command]
                    [message]
                        speaker=Boldragur
                        message= _ "Nooooo!"
                    [/message]
                    [kill]
                        id=Boldragur
                        animate=yes
                        fire_event=no
                    [/kill]
                    [role]
                        type=Elvish Marksman,Elvish Archer,Elvish Lord2
                        [not]
                            id=Eldril
                        [/not]
                        role=Reporter
                    [/role]
                    [message]
                        role=Reporter
                        message= _ "You have made a right decision; you have cleaned these forest, and saved the woses! We all owe you!"
                    [/message]
                    [allow_recruit]
                        type=Elvish Fighter2,Elvish Archer
                    [/allow_recruit]
                    [message]
                        speaker=Eldril
                        message= _ "Yes..that was..grrr...that really was generous from you...grr.."
                    [/message]
                [/command]
            [/option]
            [option]
                message= _ "In these days, every help is needed!"
                [command]
                    [message]
                        speaker=Boldragur
                        message= _ "Thank you my friend!"
                    [/message]
                    [message]
                        speaker=Arya
                        message= _ "That was a very bad decision! They will rebel, or they will just put a dagger into you at night! You will regret this, I'm sure!"
                    [/message]
                    [allow_recruit]
                        type=Thug,Thief,Poacher
                    [/allow_recruit]
                    {FULL_HEAL id=Boldragur}
                    {MODIFY_UNIT_VALUES id=Boldragur}
                        {UNIT_VALUE side 1}
                        {UNIT_VALUE canrecruit no}
                        {UNIT_VALUE overlays misc/hero-icon.png}
                    {END_MODIFYING}
                [/command]
            [/option]
        [/message]

        {VARIABLE boldragur not_on_side_8}
    [/event]





    # In theory, the player can't reach the fort until he/she met Eldril.
    # TODO: write an event against cheaters,
    # Because this may cause serious bugs (experienced when trying to jump over the map).

    #Stucked Elves
    [event]
        name=moveto
        [filter]
            side=1
            x=28-30,29
            y=   29,30
        [/filter]
        [unit]
            id=Arlendil
            name= _ "Arlendil"
            type=Elvish Marksman
            x,y=28,30
            side=1
            {IS_LOYAL}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
             [/modifications]
        [/unit]
        [unit]
            id=Elwandera
            name= _ "Elwändera"
            type=Elvish Archer
            x,y=28,31
            side=1
            {IS_LOYAL}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_STRONG}
             [/modifications]
        [/unit]
        [message]
            speaker=Arlendil
            message= _ "We are always ready to fight on the side that our lady follows! Lead us Commodore!"
        [/message]

        {VARIABLE_OP elves add 2}
        {VARIABLE_OP got add 1}
    [/event]
    [event]
        name=moveto
        [filter]
            side=1
            x=32-33,34-35,33,34-35,36
            y=   31,   30,32,   31,30
        [/filter]
        [unit]
            id=Elvera
            name= _ "Elvera"
            type=Elvish Fighter2
            x,y=34,32
            side=1
            {IS_LOYAL}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_DEXTROUS}
             [/modifications]
        [/unit]
        [unit]
            id=Axonthos
            name= _ "Axonthos"
            type=Elvish Fighter2
            x,y=35,33
            side=1
            {IS_LOYAL}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_INTELLIGENT}
             [/modifications]
        [/unit]
        [message]
            speaker=Axonthos
            message= _ "We are ready sir!"
        [/message]

        {VARIABLE_OP elves add 2}
        {VARIABLE_OP got add 1}
    [/event]

    [event]
        name=moveto
        [filter]
            side=1
            x=41,42-43,42-43,44
            y=29,   28,   29,28
        [/filter]
        [unit]
            id=Kaldrad
            name= _ "Kaldrad"
            type=Elvish Lord2
            x,y=43,30
            side=1
            {IS_LOYAL}
            [modifications]
                {TRAIT_LOYAL}
                {TRAIT_VETERAN}
             [/modifications]
        [/unit]
        [message]
            speaker=Kaldrad
            message= _ "I will be a perfect sergeant to you! Trust me, and lead us!"
        [/message]

        {VARIABLE_OP elves add 1}
        {VARIABLE_OP got add 1}
    [/event]
 
    #Counting
    [event]
        name=last breath
        first_time_only=no
        [filter]
            id=Arlendil
            [or]
                id=Elwandera
            [/or]
            [or]
                id=Elvera
            [/or]
            [or]
                id=Axonthos
            [/or]
            [or]
                id=Kaldrad
            [/or]
        [/filter] 
        [message]
            speaker=unit
            message= _ "Ugh...I hope I died for My Lady and for true causes..."
        [/message]
   
        {VARIABLE_OP elves add -1}
    [/event]

    # If you lose more than 1, you are defeated
    # But we need to make sure you had already freed them
    [event] 
        name=new turn
        first_time_only=no
        [if]
            [variable]
                name=got
                numerical_equals=3
            [/variable]
            [and]
            [variable]
                name=elves
                less_than=4
            [/variable]
            [/and]
            [then]
                [message]
                    speaker=Aethyr
                    message= _ "Oh no! We've lost too much men, we won't be able to get through Wesmere Forest!"
                [/message]
                {DEFEAT}
            [/then]
        [/if]
    [/event]

    
        

    # Before victory, we need to run one last check, because you mustn't lose elves in this turn either.
    # And you must have freed them.
    [event]
        name=moveto
        first_time_only=no
        [filter]
            side=1
            x=7
            y=2
        [/filter]
        [if]
            [variable]
                name=got
                numerical_equals=3
            [/variable]
            [and]
            [variable]
                name=elves
                greater_than=3
            [/variable]
            [/and]
            [and]
            [variable]
                name=boldragur
                not_equals=on_side_8
            [/variable]
            [/and]
            [then] 
                [message]
                    speaker=unit
                    message= _ "I found it!"
                [/message]
                [message]
                    speaker=narrator
                    image=portraits/signposts/signpost2.png
                    message= _ "Wesmere Forest 500 miles"
                [/message]
                [message]
                    speaker=Aethyr
                    message= _ "Let's go!"
                [/message]
                {VICTORY}
            [/then]
        [/if]
        [if]
            [variable]
                name=got
                less_than=3
            [/variable]
            [then]
                [message]
                    speaker=narrator
                    image=wesnoth-icon.png
                    message= _ "You found your way, but you haven't rescued the elves yet."
                [/message]
            [/then]
        [/if]
        [if]
            [variable]
                name=got
                numerical_equals=3
            [/variable]
            [and]
            [variable]
                name=elves
                greater_than=3
            [/variable]
            [/and]
            [and]
            [variable]
                name=boldragur
                equals=on_side_8
            [/variable]
            [/and]
            [then] 
                [message]
                    speaker=narrator
                    image=wesnoth-icon.png
                    message= _ "You found your way, but you haven't cleared the forest from the outlaws."
                [/message]
            [/then]
        [/if]
        [if]
            [variable]
                name=got
                numerical_equals=3
            [/variable]
            [and]
            [variable]
                name=elves
                less_than=4
            [/variable]
            [/and]
            [and]
            [have_unit]
                side=4
                [not]
                    id=Boldragur
                [/not]
            [/have_unit]
            [/and]
            [then]
                [message]
                    speaker=Aethyr
                    message= _ "We can't go, we lost too much elves! We've failed!"
                [/message]
                {DEFEAT}
            [/then]
        [/if]
    [/event]

    [event]
        name=victory
        {CLEAR_VARIABLE elves,got,outlaws,aethyr_is_primary_unit,boldragur}
    [/event]
[/scenario]
